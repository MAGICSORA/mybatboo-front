"use strict";(self.webpackChunkmybatboo=self.webpackChunkmybatboo||[]).push([[4961],{4961:(k,x,a)=>{a.r(x),a.d(x,{InquiryHistoryComponent:()=>$});var _=a(974),u=a(1135),c=a(3900),g=a(8505),d=a(5554),s=a(3437),r=a(5649),y=a(9300),f=a(4650),B=a(50),I=a(9282),n=a(2223),C=a(8740),h=a(8615),p=a(4755);function O(o,i){1&o&&(n.TgZ(0,"div",13),n._UZ(1,"mp-icon",14),n.TgZ(2,"span"),n._uU(3,"\uc9c4\ub2e8\uae30\ub85d\uc744 \ubd88\ub7ec\uc624\ub294\uc911\uc785\ub2c8\ub2e4"),n.qZA()())}function M(o,i){if(1&o&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&o){const t=n.oxw(2).ngIf;n.xp6(1),n.hij("\uc678 ",(null==t.diagnosisRecord?null:t.diagnosisRecord.diagnosisResults.length)-1," \uac1c")}}function q(o,i){if(1&o&&(n.TgZ(0,"div",15),n._UZ(1,"img",16),n.TgZ(2,"div",17)(3,"div",18),n._UZ(4,"crop-type-badge",19),n.TgZ(5,"span"),n._uU(6),n.ALo(7,"date"),n.qZA()(),n.TgZ(8,"div",18),n._uU(9),n.ALo(10,"diseaseName"),n.YNc(11,M,2,1,"span",3),n.qZA()()()),2&o){const t=n.oxw().ngIf;n.xp6(1),n.Q6J("src",null==t.diagnosisRecord?null:t.diagnosisRecord.imagePath,n.LSH)("alt","\uc791\ubb3c \uc774\ubbf8\uc9c0"),n.xp6(3),n.Q6J("cropType",null==t.diagnosisRecord?null:t.diagnosisRecord.cropType),n.xp6(2),n.Oqu(n.xi3(7,7,null==t.diagnosisRecord?null:t.diagnosisRecord.regDate,"yyyy.MM.dd HH:mm")),n.xp6(3),n.AsE(" \ubcd1\ud574: ",n.lcZ(10,10,null==t.diagnosisRecord||null==t.diagnosisRecord.diagnosisResults[0]?null:t.diagnosisRecord.diagnosisResults[0].diseaseCode)," (",(100*(null==t.diagnosisRecord?null:t.diagnosisRecord.diagnosisResults[0].accuracy)).toFixed(2),"%) "),n.xp6(2),n.Q6J("ngIf",(null==t.diagnosisRecord?null:t.diagnosisRecord.diagnosisResults.length)>1)}}function Z(o,i){if(1&o&&(n.TgZ(0,"span",20),n._uU(1),n.ALo(2,"date"),n.qZA()),2&o){const t=n.oxw().ngIf;n.xp6(1),n.Oqu(n.xi3(2,1,null==t.reply?null:t.reply.regDate,"yyyy.MM.dd HH:mm"))}}function P(o,i){if(1&o&&(n.ynx(0),n.TgZ(1,"span",21),n._uU(2),n.qZA(),n.BQk()),2&o){const t=n.oxw().ngIf;n.xp6(2),n.Oqu(null==t.reply?null:t.reply.contents)}}function v(o,i){1&o&&(n.ynx(0),n.TgZ(1,"mp-helper-text",22),n._UZ(2,"mp-icon",23),n.qZA(),n.BQk())}function T(o,i){if(1&o&&(n.ynx(0),n.TgZ(1,"div",4)(2,"div",5),n._uU(3),n.TgZ(4,"span"),n._uU(5),n.ALo(6,"date"),n.qZA()(),n.TgZ(7,"div",6),n._uU(8),n.qZA()(),n.TgZ(9,"div",7),n._uU(10,"\uc9c4\ub2e8 \uae30\ub85d"),n.qZA(),n.YNc(11,O,4,0,"div",8),n.YNc(12,q,12,12,"div",9),n.TgZ(13,"div",10),n._uU(14," \uc804\ubb38\uac00 \ub2f5\ubcc0 "),n.YNc(15,Z,3,4,"span",11),n.qZA(),n.TgZ(16,"div",12),n.YNc(17,P,3,1,"ng-container",3),n.YNc(18,v,3,0,"ng-container",3),n.qZA(),n.BQk()),2&o){const t=i.ngIf;n.xp6(3),n.hij(" ",null==t.inquiry?null:t.inquiry.title," "),n.xp6(2),n.Oqu(n.xi3(6,8,null==t.inquiry?null:t.inquiry.regDate,"yyyy.MM.dd HH:mm")),n.xp6(3),n.hij(" ",null==t.inquiry?null:t.inquiry.contents," "),n.xp6(3),n.Q6J("ngIf",t.diagnosisRecordStatus.pending),n.xp6(1),n.Q6J("ngIf",t.diagnosisRecord),n.xp6(3),n.Q6J("ngIf",(null==t.inquiry?null:t.inquiry.replyId)>-1),n.xp6(2),n.Q6J("ngIf",(null==t.inquiry?null:t.inquiry.replyId)>-1),n.xp6(1),n.Q6J("ngIf",-1===(null==t.inquiry?null:t.inquiry.replyId))}}const A=function(o,i,t,l,e,m){return{inquiry:o,status:i,diagnosisRecord:t,diagnosisRecordStatus:l,reply:e,replyStatus:m}};let b=(()=>{class o{constructor(t,l){this.modalRef=t,this.api=l,this.status$=new u.X(r.Lr.INITIAL),this.inquiry$=(0,r.X5)(this,"inquiryId").pipe((0,y.h)(e=>!!e),(0,c.w)(e=>this.api.loadInquiryDetail(e).pipe((0,r.vC)(this.status$),(0,g.b)(console.log)))),this.diagnosisStatus$=new u.X(r.Lr.INITIAL),this.diagnosisRecord$=this.inquiry$.pipe((0,y.h)(e=>!!e&&!!e.diagnosisRecordId),(0,c.w)(({diagnosisRecordId:e})=>this.api.getDiagnosisResult(e).pipe((0,r.vC)(this.diagnosisStatus$),(0,g.b)(console.log)))),this.replyStatus$=new u.X(r.Lr.INITIAL),this.reply$=this.inquiry$.pipe((0,y.h)(e=>!!e&&e.replyId>-1),(0,c.w)(({replyId:e})=>this.api.loadInquiryReply(e).pipe((0,r.vC)(this.replyStatus$),(0,g.b)(console.log))))}close(){this.modalRef.hide()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(C.UZ),n.Y36(h.s))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-inquiry-detail"]],inputs:{inquiryId:"inquiryId"},standalone:!0,features:[n.jDz],decls:11,vars:20,consts:[["height","64px"],["left","","size","m","iconName","close","color","grayDark","variant","void",3,"click"],["center",""],[4,"ngIf"],[1,"inquiry-info"],[1,"title"],[1,"content"],[1,"record-label"],["class","record-placeholder",4,"ngIf"],["class","selected-record",4,"ngIf"],[1,"reply-label"],["class","date",4,"ngIf"],[1,"reply-container"],[1,"record-placeholder"],["name","clock_loader_60","type","outlined","size","36px","color","grayLight"],[1,"selected-record"],[3,"src","alt"],[1,"info"],[1,"line"],[3,"cropType"],[1,"date"],[1,"reply-content"],["label","\uc804\ubb38\uac00\uc758 \ub2f5\ubcc0\uc744 \uae30\ub2e4\ub9ac\ub294 \uc911\uc785\ub2c8\ub2e4.","size","m","color","grayDark"],["name","pending","type","outlined"]],template:function(t,l){1&t&&(n.TgZ(0,"page-header",0)(1,"mp-icon-button",1),n.NdJ("click",function(){return l.close()}),n.qZA(),n.TgZ(2,"mp-text",2),n._uU(3,"\uc804\ubb38\uac00 \ubb38\uc758"),n.qZA()(),n.YNc(4,T,19,11,"ng-container",3),n.ALo(5,"async"),n.ALo(6,"async"),n.ALo(7,"async"),n.ALo(8,"async"),n.ALo(9,"async"),n.ALo(10,"async")),2&t&&(n.xp6(4),n.Q6J("ngIf",n.HTZ(13,A,n.lcZ(5,1,l.inquiry$),n.lcZ(6,3,l.status$),n.lcZ(7,5,l.diagnosisRecord$),n.lcZ(8,7,l.diagnosisStatus$),n.lcZ(9,9,l.reply$),n.lcZ(10,11,l.replyStatus$))))},dependencies:[_.B,p.O5,s.zJ,s.KT,s.OQ,s.l4,s.k_,p.Ov,p.uU,f.q,B.Y,I.A],styles:['@charset "UTF-8";[_nghost-%COMP%]{padding:24px}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .record-label[_ngcontent-%COMP%]{font-size:13px;color:var(--gray);font-weight:500;padding:0 0 8px 4px}[_nghost-%COMP%]   .record-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px;width:100%;padding:12px;height:104px;box-shadow:0 9px 24px #14141414,0 0 0 1px #1414140f;border-radius:8px;margin-bottom:24px;font-size:16px;color:var(--redLight);font-weight:500}[_nghost-%COMP%]   .selected-record[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px;width:100%;box-shadow:0 6px 16px #14141414,0 0 0 1px #1414140f;border-radius:8px;margin-bottom:24px}[_nghost-%COMP%]   .selected-record[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}[_nghost-%COMP%]   .selected-record[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:8px;width:100%;padding:8px 0}[_nghost-%COMP%]   .selected-record[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}[_nghost-%COMP%]   .inquiry-info[_ngcontent-%COMP%]{padding:24px 0}[_nghost-%COMP%]   .inquiry-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;color:var(--grayDark);font-weight:600;padding:0 0 12px 4px}[_nghost-%COMP%]   .inquiry-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:18px;color:var(--grayDarker);font-weight:600;padding:0 0 12px 4px}[_nghost-%COMP%]   .inquiry-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:var(--gray);font-weight:500;justify-self:flex-end}[_nghost-%COMP%]   .inquiry-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:14px;color:var(--grayDark);font-weight:500;padding:4px}[_nghost-%COMP%]   .reply-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 0 12px 4px;font-size:16px;color:var(--grayDark);font-weight:600}[_nghost-%COMP%]   .reply-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:var(--gray);font-weight:500;justify-self:flex-end}[_nghost-%COMP%]   .reply-container[_ngcontent-%COMP%]{border-radius:10px;display:flex;flex-direction:column;padding:16px;gap:12px;margin-bottom:24px;height:100%;max-height:300px;overflow:scroll;box-shadow:0 2px 4px #14141405,0 0 0 1px #00000014}[_nghost-%COMP%]   .reply-container[_ngcontent-%COMP%]   .reply-content[_ngcontent-%COMP%]{font-size:14px;color:var(--grayDark);font-weight:500;white-space:pre-wrap}']}),o})();var w=a(8054);function D(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"mp-row",13),n.NdJ("click",function(){const m=n.CHM(t).$implicit,L=n.oxw(2);return n.KtG(L.openInquiryDetail(m.id))}),n.TgZ(1,"mp-col"),n._uU(2),n.qZA(),n.TgZ(3,"mp-col"),n._uU(4),n.ALo(5,"date"),n.qZA(),n.TgZ(6,"mp-col",14),n._UZ(7,"mp-icon",15),n.qZA()()}if(2&o){const t=i.$implicit;n.xp6(2),n.Oqu(t.title),n.xp6(2),n.Oqu(n.xi3(5,3,t.regDate,"yyyy.MM.dd HH:mm")),n.xp6(3),n.Q6J("name",t.replyId>-1?"circle":"close")}}function R(o,i){1&o&&n._UZ(0,"mp-blank",16)}function U(o,i){1&o&&n._UZ(0,"mp-blank",17)}function H(o,i){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",1),n._uU(2),n.TgZ(3,"mp-button",2),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.openInquiryInputForm())}),n._UZ(4,"mp-icon",3),n.qZA()(),n.TgZ(5,"div",4)(6,"mp-table",5),n.ALo(7,"async"),n.TgZ(8,"mp-row",6)(9,"mp-col",7),n._uU(10,"\uc81c\ubaa9"),n.qZA(),n.TgZ(11,"mp-col",8),n._uU(12,"\uc791\uc131\uc77c"),n.qZA(),n.TgZ(13,"mp-col",9),n._uU(14,"\ub2f5\ubcc0"),n.qZA()(),n.YNc(15,D,8,6,"mp-row",10),n.YNc(16,R,1,0,"mp-blank",11),n.YNc(17,U,1,0,"mp-blank",12),n.ALo(18,"async"),n.qZA()(),n.BQk()}if(2&o){const t=i.ngIf,l=n.oxw();let e;n.xp6(2),n.hij(" \uc804\ubb38\uac00 \ubb38\uc758 \ub0b4\uc5ed (",t.length||0,") "),n.xp6(1),n.Q6J("label","\ubb38\uc758\ud558\uae30"),n.xp6(3),n.Q6J("listNum",10)("bodyColor","white")("status",n.lcZ(7,9,l.status$)),n.xp6(3),n.Q6J("flex",1),n.xp6(6),n.Q6J("ngForOf",t),n.xp6(1),n.Q6J("ngIf",0===(null==t?null:t.length)),n.xp6(1),n.Q6J("ngIf",null==(e=n.lcZ(18,11,l.status$))?null:e.pending)}}let $=(()=>{class o{constructor(t,l,e){this.api=t,this.bottomSheet=l,this.modalService=e,this.status$=new u.X(r.Lr.INITIAL),this.loader$=new u.X(null),this.history$=this.loader$.pipe((0,c.w)(()=>this.api.loadInquiryHistory().pipe((0,r.vC)(this.status$),(0,g.b)(console.log))))}openInquiryDetail(t){this.bottomSheet.show(b,{initialState:{inquiryId:t}})}openInquiryInputForm(){this.modalService.show(w.u,{onClose:()=>this.loader$.next(null)})}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(h.s),n.Y36(C.BB),n.Y36(C.tT))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-inquiry-history"]],standalone:!0,features:[n.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"title-label"],["size","xs","variant","outline","color","grayDark",3,"label","click"],["left","","name","add","type","outlined"],[1,"content-section"],["colGap","8px","rowGap","0px","rowPadding","16px 12px","bodyPadding","0",3,"listNum","bodyColor","status"],["head",""],["align","left",3,"flex"],["width","116px","align","left"],["width","30px","align","center"],[3,"click",4,"ngFor","ngForOf"],["minHeight","300px","title","\uc804\ubb38\uac00 \ubb38\uc758 \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",4,"ngIf"],["minHeight","484px","title","\ubb38\uc758 \ub0b4\uc5ed\uc744 \ubd88\ub7ec\uc624\ub294\uc911\uc785\ub2c8\ub2e4.",4,"ngIf"],[3,"click"],["align","center"],["type","outlined","size","20px","color","grayDark",3,"name"],["minHeight","300px","title","\uc804\ubb38\uac00 \ubb38\uc758 \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],["minHeight","484px","title","\ubb38\uc758 \ub0b4\uc5ed\uc744 \ubd88\ub7ec\uc624\ub294\uc911\uc785\ub2c8\ub2e4."]],template:function(t,l){1&t&&(n.YNc(0,H,19,13,"ng-container",0),n.ALo(1,"async")),2&t&&n.Q6J("ngIf",n.lcZ(1,1,l.history$))},dependencies:[_.B,p.sg,p.O5,s.zJ,s.gL,s.k_,p.Ov,p.uU,d.gH,d.Xh,d.wb,d.ST,s.DJ],styles:['@charset "UTF-8";[_nghost-%COMP%]{padding:24px;display:flex;flex-direction:column}[_nghost-%COMP%]   .title-label[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 0 12px 8px;font-size:16px;color:var(--grayDark);font-weight:600}[_nghost-%COMP%]   .title-label[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{margin-left:auto}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]{display:block;overflow:hidden;border-radius:10px;box-shadow:0 2px 4px #14141405,0 0 0 1px #00000014}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[head][_ngcontent-%COMP%]{font-size:15px;color:var(--grayDark);font-weight:500;background-color:#f5f5f5;box-shadow:inset 0 -1px #0000000a,inset 0 1px #0000000a}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[_ngcontent-%COMP%]:not(.head)   mp-col[_ngcontent-%COMP%]{font-size:14px;color:var(--grayDark);font-weight:400}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[_ngcontent-%COMP%]:not(.head) + mp-row[_ngcontent-%COMP%]:not(.head){border-top:1px solid var(--grayLightest)}']}),o})()}}]);