"use strict";(self.webpackChunkmybatboo=self.webpackChunkmybatboo||[]).push([[7615],{7615:(ne,E,u)=>{u.r(E),u.d(E,{DiagnosisResultComponent:()=>Xt});var t=u(2223),A=u(974),D=u(1135),y=u(3900),m=u(8505),j=u(262),K=u(515),H=u(8382),z=u(9646),L=u(4004),_=u(5649),Z=u(4650);function G(n){var o=n.toString(16);return 1===o.length?"0"+o:o}function F(n){return"#"+n.map(G).join("")}function V(n){return n?function tt(n){return Array.isArray(n[0])}(n)?n:[n]:[]}function N(n,o,e){for(var i=0;i<e.length;i++)if(et(n,o,e[i]))return!0;return!1}function et(n,o,e){switch(e.length){case 3:if(function nt(n,o,e){return 255!==n[o+3]||n[o]===e[0]&&n[o+1]===e[1]&&n[o+2]===e[2]}(n,o,e))return!0;break;case 4:if(function ot(n,o,e){return n[o+3]&&e[3]?n[o]===e[0]&&n[o+1]===e[1]&&n[o+2]===e[2]&&n[o+3]===e[3]:n[o+3]===e[3]}(n,o,e))return!0;break;case 5:if(function it(n,o,e){var i=e[0],a=e[1],s=e[2],r=e[3],c=e[4],l=n[o+3],g=R(l,r,c);return r?!!(!l&&g||R(n[o],i,c)&&R(n[o+1],a,c)&&R(n[o+2],s,c)&&g):g}(n,o,e))return!0;break;default:return!1}}function R(n,o,e){return n>=o-e&&n<=o+e}function at(n,o,e){for(var i={},s=e.ignoredColor,r=e.step,c=[0,0,0,0,0],l=0;l<o;l+=r){var g=n[l],d=n[l+1],v=n[l+2],C=n[l+3];if(!s||!N(n,l,s)){var f=Math.round(g/24)+","+Math.round(d/24)+","+Math.round(v/24);i[f]=i[f]?[i[f][0]+g*C,i[f][1]+d*C,i[f][2]+v*C,i[f][3]+C,i[f][4]+1]:[g*C,d*C,v*C,C,1],c[4]<i[f][4]&&(c=i[f])}}var Vt=c[1],te=c[2],w=c[3],ee=c[4];return w?[Math.round(c[0]/w),Math.round(Vt/w),Math.round(te/w),Math.round(w/ee)]:e.defaultColor}function rt(n,o,e){for(var i=0,a=0,s=0,r=0,c=0,l=e.ignoredColor,g=e.step,d=0;d<o;d+=g){var v=n[d+3],C=n[d]*v,f=n[d+1]*v,b=n[d+2]*v;l&&N(n,d,l)||(i+=C,a+=f,s+=b,r+=v,c++)}return r?[Math.round(i/r),Math.round(a/r),Math.round(s/r),Math.round(r/c)]:e.defaultColor}function st(n,o,e){for(var i=0,a=0,s=0,r=0,c=0,l=e.ignoredColor,g=e.step,d=0;d<o;d+=g){var v=n[d],C=n[d+1],f=n[d+2],b=n[d+3];l&&N(n,d,l)||(i+=v*v*b,a+=C*C*b,s+=f*f*b,r+=b,c++)}return r?[Math.round(Math.sqrt(i/r)),Math.round(Math.sqrt(a/r)),Math.round(Math.sqrt(s/r)),Math.round(r/c)]:e.defaultColor}function U(n){return T(n,"defaultColor",[0,0,0,0])}function T(n,o,e){return void 0===n[o]?e:n[o]}function S(n){return function dt(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement}(n)?"canvas":function ut(n){return $&&n instanceof OffscreenCanvas}(n)?"offscreencanvas":function gt(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap}(n)?"imagebitmap":n.src}function Y(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement}var $=typeof OffscreenCanvas<"u",ht=typeof window>"u";function x(n){return Error("FastAverageColor: "+n)}function O(n,o){o||console.error(n)}var vt=function(){function n(){this.canvas=null,this.ctx=null}return n.prototype.getColorAsync=function(o,e){if(!o)return Promise.reject(x("call .getColorAsync() without resource."));if("string"==typeof o){if(typeof Image>"u")return Promise.reject(x("resource as string is not supported in this environment"));var i=new Image;return i.crossOrigin=e&&e.crossOrigin||"",i.src=o,this.bindImageEvents(i,e)}if(Y(o)&&!o.complete)return this.bindImageEvents(o,e);var a=this.getColor(o,e);return a.error?Promise.reject(a.error):Promise.resolve(a)},n.prototype.getColor=function(o,e){var i=U(e=e||{});if(!o)return O(a=x("call .getColor(null) without resource"),e.silent),this.prepareResult(i,a);var r=function mt(n,o){var l,e=T(o,"left",0),i=T(o,"top",0),a=T(o,"width",n.width),s=T(o,"height",n.height),r=a,c=s;return"precision"===o.mode||(a>s?(l=a/s,r=100,c=Math.round(r/l)):(l=s/a,c=100,r=Math.round(c/l)),(r>a||c>s||r<10||c<10)&&(r=a,c=s)),{srcLeft:e,srcTop:i,srcWidth:a,srcHeight:s,destWidth:r,destHeight:c}}(function lt(n){if(Y(n)){var o=n.naturalWidth,e=n.naturalHeight;return!n.naturalWidth&&function ct(n){return-1!==n.search(/\.svg(\?|$)/i)}(n.src)&&(o=e=100),{width:o,height:e}}return function pt(n){return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement}(n)?{width:n.videoWidth,height:n.videoHeight}:{width:n.width,height:n.height}}(o),e);if(!(r.srcWidth&&r.srcHeight&&r.destWidth&&r.destHeight))return O(a=x('incorrect sizes for resource "'.concat(S(o),'"')),e.silent),this.prepareResult(i,a);if(!this.canvas&&(this.canvas=function ft(){return ht?$?new OffscreenCanvas(1,1):null:document.createElement("canvas")}(),!this.canvas))return O(a=x("OffscreenCanvas is not supported in this browser"),e.silent),this.prepareResult(i,a);if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx)return O(a=x("Canvas Context 2D is not supported in this browser"),e.silent),this.prepareResult(i);this.ctx.imageSmoothingEnabled=!1}this.canvas.width=r.destWidth,this.canvas.height=r.destHeight;try{this.ctx.clearRect(0,0,r.destWidth,r.destHeight),this.ctx.drawImage(o,r.srcLeft,r.srcTop,r.srcWidth,r.srcHeight,0,0,r.destWidth,r.destHeight);var c=this.ctx.getImageData(0,0,r.destWidth,r.destHeight).data;return this.prepareResult(this.getColorFromArray4(c,e))}catch(l){var a;return O(a=x("security error (CORS) for resource ".concat(S(o),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image")),e.silent),!e.silent&&console.error(l),this.prepareResult(i,a)}},n.prototype.getColorFromArray4=function(o,e){var a=o.length,s=U(e=e||{});if(a<4)return s;var l,r=a-a%4,c=4*(e.step||1);switch(e.algorithm||"sqrt"){case"simple":l=rt;break;case"sqrt":l=st;break;case"dominant":l=at;break;default:throw x("".concat(e.algorithm," is unknown algorithm"))}return l(o,r,{defaultColor:s,ignoredColor:V(e.ignoredColor),step:c})},n.prototype.prepareResult=function(o,e){var i=o.slice(0,3),a=[o[0],o[1],o[2],o[3]/255],s=function X(n){return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(o);return{value:[o[0],o[1],o[2],o[3]],rgb:"rgb("+i.join(",")+")",rgba:"rgba("+a.join(",")+")",hex:F(i),hexa:F(o),isDark:s,isLight:!s,error:e}},n.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},n.prototype.bindImageEvents=function(o,e){var i=this;return new Promise(function(a,s){var r=function(){g();var d=i.getColor(o,e);d.error?s(d.error):a(d)},c=function(){g(),s(x('Error loading image "'.concat(o.src,'".')))},l=function(){g(),s(x('Image "'.concat(o.src,'" loading aborted')))},g=function(){o.removeEventListener("load",r),o.removeEventListener("error",c),o.removeEventListener("abort",l)};o.addEventListener("load",r),o.addEventListener("error",c),o.addEventListener("abort",l)})},n}(),I=u(9300),_t=u(6271);let xt=(()=>{class n{transform(e){return e||0===e?_t.q6[e]:""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"cropName",type:n,pure:!0,standalone:!0}),n})();var Mt=u(50),bt=u(9282),M=u(8740),yt=u(2442),h=u(4755),p=u(3437);function At(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mp-button",2),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDiseaseDetailModal())}),t._UZ(1,"mp-icon",3),t.qZA()}}let Tt=(()=>{class n{constructor(e,i){this.bottomSheet=e,this.navigate=i}get isSick(){switch(this.diseaseItem?.diseaseCode){case 0:case 3:case 6:case 9:return!1;default:return!0}}openDiseaseDetailModal(){this.navigate.openDiseaseDetailModal({sickKey:this.diseaseItem.sickKey,diseaseCode:this.diseaseItem.diseaseCode,cropName:this.cropName})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.BB),t.Y36(yt.o))},n.\u0275cmp=t.Xpm({type:n,selectors:[["disease-list-item"]],inputs:{cropName:"cropName",diseaseItem:"diseaseItem"},standalone:!0,features:[t.jDz],decls:7,vars:5,consts:[[1,"disease-info"],["label","\uc0c1\uc138 \uc815\ubcf4","color","gray","variant","outline","size","xs",3,"click",4,"ngIf"],["label","\uc0c1\uc138 \uc815\ubcf4","color","gray","variant","outline","size","xs",3,"click"],["right","","name","chevron_right","size","20px"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"span"),t._uU(2),t.ALo(3,"diseaseName"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()(),t.YNc(6,At,2,0,"mp-button",1)),2&e&&(t.xp6(2),t.hij("\ubcd1\uba85: ",t.lcZ(3,3,null==i.diseaseItem?null:i.diseaseItem.diseaseCode),""),t.xp6(3),t.hij("\uc77c\uce58\uc728: ",(100*(null==i.diseaseItem?null:i.diseaseItem.accuracy)).toFixed(2),"%"),t.xp6(1),t.Q6J("ngIf",i.isSick))},dependencies:[A.B,h.O5,p.zJ,p.gL,p.vS,bt.A],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 12px 12px 16px;box-shadow:0 6px 16px #14141414,0 0 0 1px #1414140f;border-radius:8px}[_nghost-%COMP%]   .disease-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;font-size:13px;color:var(--grayDark);font-weight:500}']}),n})();var Ot=u(9841),B=u(5554),P=u(9401),k=u(8615),q=u(7204);function It(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"* \ub0b4\uc6a9 \uc218\uc815\uc911"),t.qZA())}function wt(n,o){if(1&n&&t._UZ(0,"mp-text",12),2&n){const e=t.oxw();t.Q6J("innerHtml",null==e.memo?null:e.memo.contents,t.oJD)}}function Dt(n,o){if(1&n&&t._UZ(0,"mp-textarea",13),2&n){const e=t.oxw();t.Q6J("formControl",e.contents)("placeholder","\uba54\ubaa8 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")}}function Zt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mp-button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.delete())}),t.ALo(1,"async"),t._UZ(2,"mp-icon",15),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("loading",t.lcZ(1,1,e.status$).pending)}}function Rt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mp-button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.editMode=!1)}),t._UZ(1,"mp-icon",17),t.qZA()}}let Bt=(()=>{class n{constructor(e,i,a,s){this.modalRef=e,this.api=i,this.alert=a,this.toase=s,this.editMode=!1,this.contents=new P.NI(""),this.status$=new D.X(_.Lr.INITIAL)}editContent(){this.editMode?this.api.updateDiagnosisRecordMemo(this.memo.id,this.contents.value).pipe((0,_.vC)(this.status$),(0,m.b)(e=>this.memo=e),(0,m.b)(()=>this.editMode=!1),(0,m.b)(()=>this.toase.show("\ub0b4\uc6a9\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))).subscribe():(this.contents.patchValue(this.memo.contents),this.editMode=!0)}delete(){this.alert.confirm({title:"\uba54\ubaa8 \uc0ad\uc81c",content:"\uba54\ubaa8\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",confirmMessage:"\uc0ad\uc81c",cancelMessage:"\ucde8\uc18c",confirmButtonColor:"red"}).pipe((0,I.h)(e=>!!e),(0,y.w)(()=>this.api.deleteDiagnosisRecordMemo(this.memo.id).pipe((0,_.vC)(this.status$))),(0,m.b)(()=>this.toase.show("\uba54\ubaa8\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),(0,m.b)(()=>this.close())).subscribe()}close(){this.modalRef.hide()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.UZ),t.Y36(k.s),t.Y36(p.c9),t.Y36(q.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-record-memo-detail"]],inputs:{memo:"memo"},standalone:!0,features:[t.jDz],decls:16,vars:13,consts:[["height","64px",3,"title"],["left","","iconName","close","size","m","variant","void","color","grayDark",3,"click"],[1,"content"],[1,"date-wrapper"],[4,"ngIf"],[3,"innerHtml",4,"ngIf"],["autofocus","true","height","300px","padding","14px","backgroundColor","white","boxShadow","0px 2px 4px 0px rgba(20, 20, 20, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)",3,"formControl","placeholder",4,"ngIf"],[1,"button-wrapper"],["variant","weak","size","s","color","red","label","\uc0ad\uc81c",3,"loading","click",4,"ngIf"],["variant","weak","size","s","color","gray","label","\ucde8\uc18c",3,"click",4,"ngIf"],["variant","weak","size","s","color","green","label","\ub0b4\uc6a9 \uc218\uc815",3,"loading","click"],["left","","name","edit"],[3,"innerHtml"],["autofocus","true","height","300px","padding","14px","backgroundColor","white","boxShadow","0px 2px 4px 0px rgba(20, 20, 20, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)",3,"formControl","placeholder"],["variant","weak","size","s","color","red","label","\uc0ad\uc81c",3,"loading","click"],["left","","name","delete"],["variant","weak","size","s","color","gray","label","\ucde8\uc18c",3,"click"],["left","","name","undo"]],template:function(e,i){1&e&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return i.close()}),t.qZA()(),t.TgZ(2,"div",2)(3,"div",3)(4,"span"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.YNc(7,It,2,0,"span",4),t.qZA(),t.YNc(8,wt,1,1,"mp-text",5),t.YNc(9,Dt,1,2,"mp-textarea",6),t.qZA(),t.TgZ(10,"div",7),t.YNc(11,Zt,3,3,"mp-button",8),t.YNc(12,Rt,2,0,"mp-button",9),t.TgZ(13,"mp-button",10),t.NdJ("click",function(){return i.editContent()}),t.ALo(14,"async"),t._UZ(15,"mp-icon",11),t.qZA()()),2&e&&(t.Q6J("title","\uba54\ubaa8 \uc0c1\uc138"),t.xp6(5),t.hij("\ucd5c\uc885 \uc218\uc815\uc77c: ",t.xi3(6,8,i.memo.updateDt,"yyyy.MM.dd HH:mm"),""),t.xp6(2),t.Q6J("ngIf",i.editMode),t.xp6(1),t.Q6J("ngIf",!i.editMode),t.xp6(1),t.Q6J("ngIf",i.editMode),t.xp6(2),t.Q6J("ngIf",!i.editMode),t.xp6(1),t.Q6J("ngIf",i.editMode),t.xp6(1),t.Q6J("loading",t.lcZ(14,11,i.status$).pending))},dependencies:[A.B,h.O5,P.JJ,P.oH,p.zJ,p.KT,p.gL,p.OQ,p.k_,h.Ov,h.uU,Z.q,p.Ly],styles:['@charset "UTF-8";[_nghost-%COMP%]{padding:24px}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .date-wrapper[_ngcontent-%COMP%]{font-size:13px;color:var(--gray);font-weight:400;padding:0 0 12px 4px;display:flex;justify-content:space-between}[_nghost-%COMP%]   mp-text[_ngcontent-%COMP%]{display:block;height:300px;padding:14px;border-radius:8px;overflow-y:scroll;box-shadow:0 2px 4px #14141405,0 0 0 1px #00000014;font-size:13px;color:var(--grayDark);font-weight:500}[_nghost-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:12px;padding:24px 0}[_nghost-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{flex:1}']}),n})();function Pt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mp-row",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.openMemoDetail(s))}),t.TgZ(1,"mp-col",13),t._uU(2),t.qZA(),t.TgZ(3,"mp-col",14),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"mp-col",14),t._uU(7),t.ALo(8,"date"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.contents),t.xp6(2),t.Oqu(t.xi3(5,3,e.regDt,"yyyy.MM.dd HH:mm")),t.xp6(3),t.Oqu(t.xi3(8,6,e.updateDt,"yyyy.MM.dd HH:mm"))}}function kt(n,o){1&n&&t._UZ(0,"mp-blank",15)}function Lt(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"mp-table",6)(2,"mp-row",7)(3,"mp-col",8),t._uU(4,"\ub0b4\uc6a9"),t.qZA(),t.TgZ(5,"mp-col",9),t._uU(6,"\uc791\uc131\uc77c"),t.qZA(),t.TgZ(7,"mp-col",9),t._uU(8,"\ucd5c\uc885 \uc218\uc815\uc77c"),t.qZA()(),t.YNc(9,Pt,9,9,"mp-row",10),t.YNc(10,kt,1,0,"mp-blank",11),t.qZA(),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("listNum",10)("bodyColor","white"),t.xp6(4),t.Q6J("flex",1),t.xp6(2),t.Q6J("flex",1),t.xp6(2),t.Q6J("ngForOf",e.memoList),t.xp6(1),t.Q6J("ngIf",0===(null==e.memoList?null:e.memoList.length))}}const Nt=function(n){return{memoList:n}};let Jt=(()=>{class n{constructor(e,i,a,s){this.api=e,this.modalRef=i,this.alert=a,this.bottomSheet=s,this.loader$=new D.X(null),this.memoList$=(0,Ot.a)([(0,_.X5)(this,"recordId"),this.loader$]).pipe((0,I.h)(([r])=>!!r),(0,y.w)(([r])=>this.api.getDiagnosisMemoList(r)),(0,m.b)(r=>console.log(r)))}close(){this.modalRef.hide()}addMemo(){this.alert.prompt({title:"\uba54\ubaa8 \ucd94\uac00",content:"\uba54\ubaa8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",confirmMessage:"\uc791\uc131",confirmButtonColor:"green",confirmButtonIconType:"outlined",confirmButtonIconName:"add",cancelMessage:"\ucde8\uc18c"}).pipe((0,I.h)(e=>!!e),(0,m.b)(e=>console.log(e)),(0,y.w)(e=>this.api.addDiagnosisRecordMemo(this.recordId,e)),(0,m.b)(()=>this.loader$.next(null))).subscribe()}openMemoDetail(e){this.bottomSheet.show(Bt,{initialState:{memo:e},onClose:()=>this.loader$.next(null)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.s),t.Y36(M.UZ),t.Y36(p.c9),t.Y36(M.BB))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-record-memo-list"]],inputs:{recordId:"recordId"},standalone:!0,features:[t.jDz],decls:8,vars:6,consts:[["height","64px"],["left","","iconName","close","size","m","variant","void","color","grayDark",3,"click"],["center",""],["right","","variant","outline","color","gray","size","s",3,"label","click"],["left","","name","edit"],[4,"ngIf"],["colGap","4px","rowGap","12px","rowPadding","12px 8px","bodyPadding","12px",3,"listNum","bodyColor"],["head",""],["width","150px","align","center"],["align","center",3,"flex"],[3,"click",4,"ngFor","ngForOf"],["minHeight","300px","title","\uc791\ubb3c\uc5d0 \ub300\ud55c \uae30\ub85d\uc744 \uba54\ubaa8\ub85c \ub0a8\uaca8\ubcf4\uc138\uc694!",4,"ngIf"],[3,"click"],[1,"memo-content"],["align","right"],["minHeight","300px","title","\uc791\ubb3c\uc5d0 \ub300\ud55c \uae30\ub85d\uc744 \uba54\ubaa8\ub85c \ub0a8\uaca8\ubcf4\uc138\uc694!"]],template:function(e,i){1&e&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return i.close()}),t.qZA(),t.TgZ(2,"mp-text",2),t._uU(3,"\uc791\ubb3c \uc77c\uc9c0"),t.qZA(),t.TgZ(4,"mp-button",3),t.NdJ("click",function(){return i.addMemo()}),t._UZ(5,"mp-icon",4),t.qZA()(),t.YNc(6,Lt,11,6,"ng-container",5),t.ALo(7,"async")),2&e&&(t.xp6(4),t.Q6J("label","\uba54\ubaa8 \ucd94\uac00"),t.xp6(2),t.Q6J("ngIf",t.VKq(4,Nt,t.lcZ(7,2,i.memoList$))))},dependencies:[A.B,h.sg,h.O5,p.zJ,p.KT,p.gL,p.OQ,p.k_,p.vS,h.Ov,h.uU,Z.q,p.DJ,B.gH,B.Xh,B.wb,B.ST],styles:['@charset "UTF-8";.bottom-sheet[_nghost-%COMP%], .bottom-sheet   [_nghost-%COMP%]{height:500px;max-height:auto!important}[_nghost-%COMP%]{padding-top:var(--page-header-height);padding-bottom:var(--bottom-fixed-bar-height)}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[head][_ngcontent-%COMP%]{font-size:15px;color:var(--grayDark);font-weight:500;background-color:#f5f5f5;box-shadow:inset 0 -1px #0000000a,inset 0 1px #0000000a}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[_ngcontent-%COMP%]:not(.head){border-radius:10px;box-shadow:0 2px 4px #14141405,0 0 0 1px #00000014;background-color:var(--hoverWeak)}[_nghost-%COMP%]   mp-table[_ngcontent-%COMP%]   mp-row[_ngcontent-%COMP%]:not(.head)   mp-col[_ngcontent-%COMP%]{font-size:13px;color:var(--grayDark);font-weight:400;word-wrap:break-word;-webkit-line-clamp:1;text-overflow:ellipsis;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}']}),n})();var Et=u(8484),W=u(4135),Ht=u(9972);const zt=function(n,o){return{text:n,placement:"right",color:o,gap:"10px"}};function Ft(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mp-radio",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.selected.patchValue(s.id))}),t.ALo(1,"categoryName"),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("selected",i.selected.value===e.id)("label",t.WLB(4,zt,t.lcZ(1,2,e.name)+" ("+e.cnt+")",i.selected.value===e.id?"green":"gray"))}}function Ut(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,Ft,2,7,"mp-radio",9),t.qZA()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}const Qt=function(){return["my-page","category"]};let St=(()=>{class n extends _.NT{constructor(e,i,a){super(),this.modalRef=e,this.api=i,this.toast=a,this.categories$=this.api.loadUserCategories().pipe((0,m.b)(console.log)),this.selected=new P.NI(void 0),this.status$=new D.X(_.Lr.INITIAL)}ngOnInit(){this.subscribeOn((0,_.X5)(this,"diagnosisId").pipe((0,I.h)(e=>!!e),(0,y.w)(e=>this.api.getDiagnosisResult(e).pipe((0,m.b)(({categoryId:i})=>this.initialCategoryId=i),(0,m.b)(({categoryId:i})=>this.selected.patchValue(i))))))}close(){this.modalRef.hide()}changeCategory(){this.api.changeDiagnosisRecordCategory(this.diagnosisId,this.selected.value).pipe((0,_.vC)(this.status$),(0,m.b)(()=>this.toast.show("\uce74\ud14c\uace0\ub9ac\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),(0,m.b)(()=>this.modalRef.hide())).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.UZ),t.Y36(k.s),t.Y36(q.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-category-change-modal"]],inputs:{diagnosisId:"diagnosisId"},standalone:!0,features:[t.qOj,t.jDz],decls:11,vars:9,consts:[["height","64px"],["left","","size","m","iconName","close","color","grayDark","variant","void",3,"click"],["center",""],["mpButton","","right","","size","xs","label","\uce74\ud14c\uace0\ub9ac \uad00\ub9ac","variant","outline","color","grayDark",3,"routerLink"],["right","","name","chevron_right"],["class","category-list",4,"ngIf"],[1,"button-wrapper"],["size","m","color","green","label","\ubcc0\uacbd\ud558\uae30",3,"disabled","loading","click"],[1,"category-list"],[3,"selected","label","click",4,"ngFor","ngForOf"],[3,"selected","label","click"]],template:function(e,i){1&e&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return i.close()}),t.qZA(),t.TgZ(2,"mp-text",2),t._uU(3,"\uce74\ud14c\uace0\ub9ac \ubcc0\uacbd"),t.qZA(),t.TgZ(4,"a",3),t._UZ(5,"mp-icon",4),t.qZA()(),t.YNc(6,Ut,2,1,"div",5),t.ALo(7,"async"),t.TgZ(8,"div",6)(9,"mp-button",7),t.NdJ("click",function(){return i.changeCategory()}),t.ALo(10,"async"),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("routerLink",t.DdM(8,Qt)),t.xp6(2),t.Q6J("ngIf",t.lcZ(7,4,i.categories$)),t.xp6(3),t.Q6J("disabled",i.initialCategoryId===i.selected.value)("loading",t.lcZ(10,6,i.status$).pending))},dependencies:[A.B,h.sg,h.O5,W.rH,Ht.Fo,p.zJ,p.KT,p.gL,p.OQ,p.k_,p.vS,h.Ov,Z.q,p.l3,Et.D],styles:['@charset "UTF-8";[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:24px;gap:16px}[_nghost-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{padding:24px}[_nghost-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{width:100%}']}),n})();var Yt=u(8054),$t=u(1381);function qt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",14),t._UZ(1,"nz-image",15,16),t.TgZ(3,"img",17),t.NdJ("click",function(){t.CHM(e);const a=t.MAs(2);return t.KtG(a.imageRef.nativeElement.click())}),t.qZA()()}if(2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("nzSrc",null==e?null:e.imagePath),t.xp6(2),t.Q6J("src",null==e?null:e.imagePath,t.LSH)}}function Wt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t._UZ(1,"crop-type-badge",19),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"mp-button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changeCategory())}),t._UZ(6,"mp-icon",21),t.qZA()()}if(2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("cropType",e.cropType),t.xp6(2),t.Oqu(t.xi3(4,3,e.regDate,"yyyy.MM.dd HH:mm")),t.xp6(2),t.Q6J("label","\uce74\ud14c\uace0\ub9ac \ubcc0\uacbd")}}function jt(n,o){if(1&n&&(t._UZ(0,"disease-list-item",23),t.ALo(1,"cropName")),2&n){const e=o.$implicit,i=t.oxw(2).ngIf;t.Q6J("diseaseItem",e)("cropName",t.lcZ(1,2,i.cropType))}}function Kt(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",8)(2,"span",9),t._uU(3,"\ub2e4\ub978 \uc720\uc0ac \uacb0\uacfc"),t.qZA(),t.YNc(4,jt,2,4,"disease-list-item",22),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e.diagnosisResults.slice(1,null==e.diagnosisResults?null:e.diagnosisResults.length))}}function Gt(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,qt,4,2,"div",4),t.ALo(2,"async"),t.TgZ(3,"div",5),t.YNc(4,Wt,7,6,"div",6),t.TgZ(5,"div",7)(6,"div",8)(7,"span",9),t._uU(8,"\uac00\uc7a5 \uc720\uc0ac\ud55c \uacb0\uacfc"),t.qZA(),t._UZ(9,"disease-list-item",10),t.ALo(10,"cropName"),t.qZA(),t.YNc(11,Kt,5,1,"ng-container",3),t.qZA(),t.TgZ(12,"mp-callout",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openInquiryForm())}),t._UZ(13,"mp-icon",12)(14,"mp-icon",13),t.qZA()(),t.BQk()}if(2&n){const e=o.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngLet",t.lcZ(2,6,i.bgColor$)),t.xp6(3),t.Q6J("ngIf",e),t.xp6(5),t.Q6J("cropName",t.lcZ(10,8,e.cropType))("diseaseItem",e.diagnosisResults[0]),t.xp6(2),t.Q6J("ngIf",(null==e||null==e.diagnosisResults?null:e.diagnosisResults.length)>1),t.xp6(1),t.Q6J("description","\uc9c4\ub2e8 \uacb0\uacfc\uc5d0 \ub300\ud574 \ub354 \uad81\uae08\ud55c\uac8c \uc788\ub2e4\uba74 \uc804\ubb38\uac00\uc5d0\uac8c \uc9c8\ubb38\uc744 \ub0a8\uaca8\ubcf4\uc138\uc694.")}}let Xt=(()=>{class n extends _.NT{constructor(e,i,a,s,r,c,l){super(),this.modalRef=e,this.api=i,this.route=a,this.renderer=s,this.elementRef=r,this.bottomSheet=c,this.modalService=l,this.diagnosisResult$=new D.X(null),this.fastAverageColor=new vt,this.bgColor$=this.diagnosisResult$.pipe((0,I.h)(g=>!!g),(0,y.w)(({imagePath:g})=>this.fastAverageColor.getColorAsync(g)),(0,m.b)(g=>{this.renderer.setStyle(this.elementRef.nativeElement,"--image-container-bg-color",g?.hex,t.JOm.DashCase)}),(0,j.K)(()=>K.E))}ngOnInit(){this.subscribeOn((0,H.s)(()=>!!this.diagnosisRecord,(0,z.of)(this.diagnosisRecord),(0,H.s)(()=>!!this.diagnosisId,(0,z.of)(this.diagnosisId),this.route.params.pipe((0,L.U)(({diagnosisId:e})=>+e))).pipe((0,y.w)(e=>this.api.getDiagnosisResult(e).pipe((0,L.U)(i=>({...i,id:e})))))).pipe((0,L.U)(e=>this.diagnosisResult$.next(e)),(0,m.b)(console.log))),this.modalRef&&this.modalRef.setClass("diagnosis-result-modal")}close(){this.modalRef?this.modalRef.hide():history.back()}openMemoList(){this.diagnosisResult$.value&&this.bottomSheet.show(Jt,{initialState:{recordId:this.diagnosisResult$.value.diagnosisRecordId}})}changeCategory(){this.bottomSheet.show(St,{initialState:{diagnosisId:this.diagnosisResult$.value.diagnosisRecordId}})}openInquiryForm(){this.modalService.show(Yt.u,{initialState:{record:this.diagnosisResult$.value}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.UZ,8),t.Y36(k.s),t.Y36(W.gz),t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(M.BB),t.Y36(M.tT))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-diagnosis-result"]],inputs:{diagnosisId:"diagnosisId",diagnosisRecord:"diagnosisRecord"},standalone:!0,features:[t.qOj,t.jDz],decls:5,vars:4,consts:[["height","64px",3,"title"],["left","","iconName","arrow_back","size","m","variant","void","color","grayDark",3,"click"],["right","","iconName","note_alt","iconType","outlined","iconSize","24px","size","m","variant","weak","borderRadius","6px","color","grayDark",3,"click"],[4,"ngIf"],["class","crop-image",4,"ngLet"],[1,"content-wrapper"],["class","crop-info",4,"ngIf"],[1,"disease-list"],[1,"disease-wrapper"],[1,"title"],[3,"cropName","diseaseItem"],["color","green","variant","weak","size","s",3,"description","click"],["left","","name","help_outlined","size","18px"],["right","","name","chevron_right","size","18px","color","greenDark"],[1,"crop-image"],["nzWidth","200px","nzHeight","200px",3,"nzSrc"],["nzImage",""],["alt","crop image",3,"src","click"],[1,"crop-info"],[3,"cropType"],["size","xs","variant","outline","color","grayDark",3,"label","click"],["right","","name","chevron_right","type","outlined"],[3,"diseaseItem","cropName",4,"ngFor","ngForOf"],[3,"diseaseItem","cropName"]],template:function(e,i){1&e&&(t.TgZ(0,"page-header",0)(1,"mp-icon-button",1),t.NdJ("click",function(){return i.close()}),t.qZA(),t.TgZ(2,"mp-icon-button",2),t.NdJ("click",function(){return i.openMemoList()}),t.qZA()(),t.YNc(3,Gt,15,10,"ng-container",3),t.ALo(4,"async")),2&e&&(t.Q6J("title","\uc9c4\ub2e8 \uacb0\uacfc"),t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,i.diagnosisResult$)))},dependencies:[A.B,h.sg,h.O5,$t.xc,p.zJ,p.KT,p.gL,p.k_,p.vS,_.eJ,h.Ov,h.uU,Z.q,xt,Mt.Y,Tt,p.iP],styles:['@charset "UTF-8";  .modal-dialog.diagnosis-result-modal{max-width:100vw;max-height:var(--full-height);margin:0}  .modal-dialog.diagnosis-result-modal .modal-content{display:block;border-radius:0;width:100vw;height:var(--full-height);margin:0}[_nghost-%COMP%]   page-header[_ngcontent-%COMP%]{box-shadow:inset 0 -1px #0000001f}[_nghost-%COMP%]   .crop-image[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:24px;background:var(--image-container-bg-color, #fcfcfc);border-bottom:1px solid var(--grayLightest)}[_nghost-%COMP%]   .crop-image[_ngcontent-%COMP%]   nz-image[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .crop-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;max-width:280px;aspect-ratio:1/1;box-shadow:0 6px 16px #14141414,0 0 0 1px #1414140f}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:24px 36px}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .crop-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:13px;color:var(--grayDark)}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .crop-info[_ngcontent-%COMP%]   mp-button[_ngcontent-%COMP%]{margin-left:auto}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .disease-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .disease-list[_ngcontent-%COMP%]   .disease-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .disease-list[_ngcontent-%COMP%]   .disease-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:15px;color:var(--grayDark);font-weight:600;margin-left:4px}']}),n})()}}]);